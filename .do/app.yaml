spec:
  name: api-gateway
  services:
    - name: api-gateway
      http_port: 3000
      internal_ports: []
      instance_count: 1
      instance_size_slug: basic-xxs
      routes:
        - path: "/"
      envs:
        - key: NODE_ENV
          value: production
        - key: PORT
          value: "3000"
        - key: API_PREFIX
          value: /api/v1
        - key: DB_HOST
          value: ${DB_HOST}
        - key: DB_PORT
          value: ${DB_PORT}
        - key: DB_NAME
          value: ${DB_NAME}
        - key: DB_USER
          value: ${DB_USER}
          type: GENERAL
        - key: DB_PASSWORD
          value: ${DB_PASSWORD}
          type: SECRET
      image:
        registry: registry.digitalocean.com
        repository: ${DOCR_REPOSITORY}
        tag: latest
      health_check:
        http_path: /api/v1/health
        initial_delay_seconds: 10
        period_seconds: 30
        timeout_seconds: 5
        success_threshold: 1
        failure_threshold: 3
